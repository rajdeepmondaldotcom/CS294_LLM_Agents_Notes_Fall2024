# Lecture 3

The [lecture](https://www.youtube.com/live/OOdtmCMSOo4?si=lQ-mnONR9dVWtkrc) outline how **future AI applications** will increasingly rely on **agentic systems** that orchestrate multiple specialized agents (writers, reviewers, safekeepers, etc.) to handle complex tasks. **Autogen** provides a conversation-based framework for building these multi-agent solutions, while **LlamaIndex** offers robust tools for **multimodal retrieval** and indexing. Together, they enable developers to parse and retrieve rich data (text, images, tables) and layer on advanced **agentic reasoning** (planning, tool use, memory) to produce powerful, flexible AI applications.

---

## Future AI Applications & Agentic AI

| **Topic**      | **Notes**                                                                                                                                                                                                                                                                                                                 |
|-------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Generative AI Progress**          | - Rapid improvement since **2022** with advanced language models (LLMs) and other generative models. <br>- Far more capable than older generative techniques (e.g., topic modeling).                                                                                                                                                |
| **Agentic AI Concept**              | - AI systems (agents) that can perform **autonomous tasks** or complex workflows on behalf of humans. <br>- *Examples:* Personal assistants, gaming agents, code generation agents, etc. <br>- This shift is observed in many research works (e.g., Berkeley article on compound LLM-based systems).                                                                 |
| **Potential & Demos**               | - Demo of an AI agent building a website to fetch models from Hugging Face: <br>   - Multi-agent collaboration with minimal human supervision. <br>   - Self-healing/self-correction when errors appear in the code (adds back missing script lines).                                                                               |
| **Key Benefits of Agentic AI**      | 1. **Natural Interface:** Users communicate via natural language. <br>2. **Complex Task Execution:** Agents can operate autonomously with minimal human intervention. <br>3. **Software Architecture Shift:** Multiple agents collaborate recursively, allowing new ways of building software.                                                                         |

---

## Example: Supply Chain Optimization with Multiple Agents

| **Topic**         | **Notes**                                                                                                                                                                                                                                  |
|----------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Use Case**                           | - Application for supply chain optimization (e.g., coffee shop owners exploring shipping constraints).                                                                                                                                               |
| **Agent Roles**                        | 1. **Commander:** Orchestrates the overall task and conversation flow. <br>2. **Writer:** Uses an LLM backend to propose code or solutions. <br>3. **Safeguard:** Checks safety/security of code (another LLM or specialized tool).                                                        |
| **Workflow**                           | 1. User asks a complex question (e.g., “Prohibit shipping from Supply 1 to Region 3?”). <br>2. Commander halts main conversation and spawns new sub-conversations with Writer → obtains code. <br>3. Commander checks code safety with Safeguard. <br>4. Commander executes code → returns results. <br>5. Writer finalizes the answer. |
| **Advantages**                         | - End user sees a **simple chat interface**, no need to know about code or optimization details. <br>- Decomposition of complex tasks for more robust results.                                                                                                                             |

---

## Benefits & Design of Multi-Agent Systems

| **Topic**           | **Notes**                                                                                                                                                                                                                                                                                                                                                              |
|------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Why Multiple Agents?**                 | - **Higher Response Quality:** Agents specialize in subtasks and exchange results (divide and conquer). <br>- **Modularity:** Different roles (e.g., writer, safeguard) can be re-used or swapped. <br>- **Address LLM Limits:** Specialized agents (for validation, grounding) can mitigate hallucinations or inaccuracies.                                                                                                         |
| **Performance Gains**                    | - Experiments show multi-agent decomposition can **outperform single-agent** solutions by significant margins (20% or more in certain tasks).                                                                                                                                                                                                                                                                             |
| **Easier Maintenance & Extension**       | - A modular approach makes it simple to **swap out** components (e.g., replace language-model Safeguard with a human or specialized tool).                                                                                                                                                                                                                                                                                |
| **Challenges in Framework Design**       | 1. **Unified Abstraction:** Agents must handle humans, tools, LLMs as a single concept where possible. <br>2. **Flexible Orchestration:** Must accommodate static workflows or dynamic creation of new sub-tasks/agents. <br>3. **Design Patterns:** Reflection, chain-of-thought, tool usage, planning, memory, etc. <br>4. **Tradeoffs:** Balancing autonomy vs. developer control, cost vs. complexity, centralized vs. decentralized.                         |

---

## Autogen Framework

| **Topic**               | **Notes**                                                                                                                                                                                                                                                                                                                                                                      |
|----------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Origins & Overview**                       | - **Autogen**: A programming framework for building **agentic AI** systems. <br>- Initially part of Microsoft’s FLAML (AutoML/hyper-parameter tuning), now separate. <br>- Emphasizes multi-agent conversation as a core mechanism.                                                                                                                 |
| **Key Concept 1: Conversable Agent**         | - *Single abstraction* for different entities (LLMs, tools, humans). <br>- Agents can internally hold “nested conversations” with sub-agents. Allows building more complex agents in a **recursive** manner.                                                                                                                                                                               |
| **Key Concept 2: Conversation Programming**  | - Use multi-step chats (e.g., **sequential**, **nested**, **group chats**) to coordinate agent roles. <br>- Example: “Writer” and “Critic” can refine content iteratively. <br>- Additional complexity: nested chat with specialized reviewers (SEO reviewer, legal reviewer, etc.). <br>- Tools integrated via conversations (e.g., “Chessboard” agent to ensure only valid chess moves).                                |
| **Group Chat & Dynamic Selection**           | - Agents in a **group chat** automatically choose who speaks next. <br>- A “group chat manager” or “transition logic” can be partially controlled by rules or constraints. <br>- Allows flexible collaboration among multiple specialized agents.                                                                                                                                        |
| **Applications & Use Cases**                 | - **Software Dev & Platforms**: Multi-agent coding. <br>- **Research**: Scientific agent teams (e.g., protein design, material design). <br>- **Web Agents**: Automation of web tasks (Emergen AI’s “AgentE”), flight booking, form filling. <br>- **Data Processing**: Summaries, analysis, data cleaning. <br>- **Education, Healthcare, Finance**: Domain-specific agent teams for solutions.                                  |

---

## Emerging Patterns & Research

| **Topic**            | **Notes**                                                                                                                                                                                                                                      |
|-------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Evaluation & Optimization**             | - **Agent-based Evaluation**: Automatic scoring of success or failure based on application criteria. <br>- **Agent-based Optimization**: Agents learn or refine themselves via feedback.                                                                                                    |
| **Autobuild**                             | - **Automatic team creation** for tasks: <br>   1. User describes a task in natural language. <br>   2. The system suggests relevant agent roles and forms a team. <br>- **Adaptive Build**: Decomposes tasks into subtasks, possibly spinning up new agents from a library or creating them on the fly.                                                                |
| **Key Challenges**                         | 1. **Optimal Multi-Agent Workflow**: Balancing cost, latency, reliability. <br>2. **Improved Reasoning**: Planning, multi-modality, continuous learning. <br>3. **Safety & Human Oversight**: Ensuring safe, controllable systems at scale.                                                                                          |

---

## LlamaIndex & Multimodal RAG

| **Topic**     | **Notes**                                                                                                                                                                                                                                                                                                      |
|------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **LlamaIndex Intro**               | - Developer toolkit to **build context-augmented LLM** apps from prototype to production. <br>- Supports indexing of data, advanced retrieval pipelines, and (optionally) agentic reasoning over that data.                                                                                                               |
| **Basic RAG Limitations**          | - Standard “*retrieve chunks → feed chunks to LLM → get answer*” approach often fails with: <br>   1. Large or complex documents (tables, images, diagrams). <br>   2. Multi-document comparisons or multi-step reasoning. <br>   3. Personalization or memory across queries.                                                                                  |
| **Multimodal Data**                | - Need advanced **document parsing** to handle PDFs, images, tables, PowerPoints, and more. <br>- *Garbage in, garbage out principle*: High-quality extraction is crucial for accurate LLM results.                                                                                                                      |
| **Hierarchical Indexing**          | - Instead of naive chunking, break documents into semantically consistent units (text, tables, images) and generate relevant representations for indexing. <br>- Use text embeddings (e.g., OpenAI) or image embeddings (e.g., Clip). <br>- On retrieval, feed both text + image to a **multimodal LLM** (e.g., GPT-4 V).                                  |
| **Agentic RAG**                    | - Combine retrieval with **agentic reasoning**: chain-of-thought, reflection, tool usage. <br>- **Architectures**: from simple, constrained flows (IF-THEN sequences) to more advanced (React, LM-Compiler, “Plan & Execute”). <br>- **Tradeoff**: Constrained flows = reliability. Unconstrained = flexibility but higher risk and cost.                                          |
| **Deployment & Production**        | - Large-scale multi-agent orchestration as microservices. <br>- Agents communicate via a centralized messaging queue. <br>- **Human-in-the-loop**: The system can pause and request user input (e.g., clarifications) when needed.                                                                                                                           |
| **Use Cases**                      | 1. **Report Generation**: Summaries, structured outputs (PowerPoints, PDFs). <br>2. **Customer Support**: High-volume question handling, potential escalation to human. <br>3. **Complex Data Analysis**: Multi-document or large dataset queries. <br>4. **Action Execution**: Agents can schedule tasks, send emails, write code, etc.                                               |

---